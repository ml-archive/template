# Nodes Vapor Template
[![Swift Version](https://img.shields.io/badge/Swift-4.2-brightgreen.svg)](http://swift.org)
[![Vapor Version](https://img.shields.io/badge/Vapor-3-30B6FC.svg)](http://vapor.codes)
[![Circle CI](https://circleci.com/gh/nodes-vapor/template/tree/master.svg?style=shield)](https://circleci.com/gh/nodes-vapor/template)
[![codebeat badge](https://codebeat.co/badges/3a24a136-5aa1-4622-a875-69d0552202c7)](https://codebeat.co/projects/github-com-nodes-vapor-template-master)
[![codecov](https://codecov.io/gh/nodes-vapor/template/branch/master/graph/badge.svg)](https://codecov.io/gh/nodes-vapor/template)
[![Readme Score](http://readme-score-api.herokuapp.com/score.svg?url=https://github.com/nodes-vapor/template)](http://clayallsopp.github.io/readme-score?url=https://github.com/nodes-vapor/template)
[![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://raw.githubusercontent.com/nodes-vapor/template/master/LICENSE)


A Vapor template for convenient and fast scaffolding üèé


## üì¶ Installation

### Creating a project

You can create a new project using the [Vapor toolbox](https://vapor.github.io/documentation/getting-started/install-toolbox.html).
```bash
vapor new MyApp --template=nodes-vapor/template
```

## Getting started üöÄ

### Project name

Before building your project you need to change the name of the project in `Package.swift`. Look for `name: "NodesTemplate"` and adjust it to fit your project.

### Environment variables

Before running your project, you need to make sure you have the following environment variables set up. For more information on how do this, have a look at our guide [here](https://github.com/nodes-vapor/readme/blob/master/Documentation/how-to-setup-environment-variables.md). All the different keys for environment variables are defined in `Utilities/EnvironmentKey.swift`.

#### Project

These are project-specific values such as the name of the project (e.g. "My Blog") and the url of the current environment (e.g. http://my-blog.com).

#### MySQL

For MySQL you can either use a connection string (using the `DATABASE_URL` key) or you can supply hostname, username, password and database individually. These will be set automatically on Vapor Cloud, but they will need to be set when running locally.

#### Redis

Similar to MySQL, you can either use a connection string (using the `REDIS_URL` key) or you can supply hostname and database individually. These will be set automatically on Vapor Cloud, but they will need to be set when running locally.

#### Mailgun

In order to send out emails using Mailgun, the Mailgun environment variables need to be set.

#### JWT Keychain

For generating tokens, a couple of signers need to be set for JWT Keychain. These can be generated by using `openssl rand -base64 32`. Remember to generate different values for each environment.

#### Admin Panel

Similar to JWT Keychain, Admin Panel also needs a signer to be set.

#### Reset

For handling reset of passwords, Reset also needs a couple of signers to be set (similar to JWT Keychain).

#### Nodes SSO

To enable Nodes SSO on Admin Panel the project needs to be [created on Ournodes](https://github.com/nodes-projects/readme/blob/master/server-side/nodes-sso.md) (private link) and the environment variables needs to be set up in the project.

#### Bugsnag

To support error reporting to Bugsnag, a project needs to be created on our organization and the API key needs to be added to the project.

### Storage

Remember to update `configure.swift` and set the correct `pathTemplate` for the `S3Driver`. If you're deploying to Vapor Cloud, then `nodestemplate` should be replaced by your app name on Vapor Cloud. If you're deploying to somewhere else than Vapor Cloud, you might want to change the template pattern.

## Project layout üóÇ

This project template aims to follow the official [Vapor Style guidelines](https://docs.vapor.codes/3.0/extras/style-guide/), with some minor additions/deviations:

- We have introduced a `providers.swift` file to handle setting up of providers.
- We have introduced a `leafTags.swift` file to handle setting up of Leaf tags.
- We have a folder named `External` for any third party integrations (we used to name this folder Services in Vapor 2).


## Xcode project  üî® 

[Vapor toolbox](https://vapor.github.io/documentation/getting-started/install-toolbox.html) makes it simple to generate a project for Xcode.
```bash
vapor xcode -y
```

### Starting your server  üèÅ 
In Xcode, select the `Run` scheme if you want to startup your server.


### Testing your code ‚è±
For testing, make sure to have the `MyProject-Package` scheme selected. Then, you can use `‚åòU` like usual.


## üèÜ Credits

This package is developed and maintained by the Vapor team at [Nodes](https://www.nodesagency.com).
The package owner for this project is [Steffen](https://github.com/steffendsommer).


## üìÑ License

This package is open-sourced software licensed under the [MIT license](http://opensource.org/licenses/MIT).
